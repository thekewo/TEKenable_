{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { User } from '../shared/models/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../shared/services/user.service\";\nimport * as i3 from \"@angular/common\";\nfunction HomeComponent_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email is not valid. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtemplate(1, HomeComponent_div_6_div_1_Template, 2, 0, \"div\", 9);\n    i0.ɵɵtemplate(2, HomeComponent_div_6_div_2_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.angForm.controls[\"email\"].errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.angForm.controls[\"email\"].errors.email);\n  }\n}\nfunction HomeComponent_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Contact source is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtemplate(1, HomeComponent_div_17_div_1_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.angForm.controls[\"contactSource\"].errors.required);\n  }\n}\nfunction HomeComponent_div_22_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Contact reason is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtemplate(1, HomeComponent_div_22_div_1_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.angForm.controls[\"contactReason\"].errors.required);\n  }\n}\nfunction HomeComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \" Email is already in the database. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \" You signed up to the newsletter. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class HomeComponent {\n  constructor(formBuilder, userService, ref) {\n    this.formBuilder = formBuilder;\n    this.userService = userService;\n    this.ref = ref;\n    this.title = 'app';\n    this.createForm();\n    this.isEmailDuplicate = false;\n    this.isSubmitted = false;\n  }\n  createForm() {\n    this.angForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.email]],\n      contactSource: ['', Validators.required],\n      contactReason: ['', Validators.required]\n    });\n  }\n  submitNewsletter(data) {\n    var user = new User();\n    user.email = data.value.email;\n    user.contactSource = data.value.contactSource;\n    user.contactReason = data.value.contactReason;\n    this.isEmailDuplicate = this.userService.isEmailInDatabase(user.email);\n    if (!this.isEmailDuplicate) {\n      this.userService.submitNewsletter(user);\n    }\n    this.isSubmitted = true;\n    this.ref.markForCheck();\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 27,\n  vars: 7,\n  consts: [[\"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"formControlName\", \"email\", \"type\", \"email\", \"ngModel\", \"\", \"email\", \"\", 1, \"form-control\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"formControlName\", \"contactSource\", \"type\", \"text\", 1, \"form-control\"], [\"formControlName\", \"contactReason\", \"type\", \"text\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [1, \"alert\", \"alert-success\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.submitNewsletter(ctx.angForm);\n      });\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"label\");\n      i0.ɵɵtext(4, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"input\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, HomeComponent_div_6_Template, 3, 2, \"div\", 3);\n      i0.ɵɵelementStart(7, \"div\", 1)(8, \"label\");\n      i0.ɵɵtext(9, \"How they heard about us\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"select\", 4)(11, \"option\");\n      i0.ɵɵtext(12, \"Advert\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"option\");\n      i0.ɵɵtext(14, \"Word of Mouth\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"option\");\n      i0.ɵɵtext(16, \"Other\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(17, HomeComponent_div_17_Template, 2, 1, \"div\", 3);\n      i0.ɵɵelementStart(18, \"div\", 1)(19, \"label\");\n      i0.ɵɵtext(20, \"Reason for signing up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, HomeComponent_div_22_Template, 2, 1, \"div\", 3);\n      i0.ɵɵelementStart(23, \"button\", 6);\n      i0.ɵɵtext(24, \" Submit \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(25, HomeComponent_div_25_Template, 2, 0, \"div\", 3);\n      i0.ɵɵtemplate(26, HomeComponent_div_26_Template, 2, 0, \"div\", 7);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.angForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.angForm.controls[\"email\"].invalid && (ctx.angForm.controls[\"email\"].dirty || ctx.angForm.controls[\"email\"].touched));\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", ctx.angForm.controls[\"contactSource\"].invalid && (ctx.angForm.controls[\"contactSource\"].dirty || ctx.angForm.controls[\"contactSource\"].touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.angForm.controls[\"contactReason\"].invalid && (ctx.angForm.controls[\"contactReason\"].dirty || ctx.angForm.controls[\"contactReason\"].touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.angForm.pristine || ctx.angForm.invalid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isEmailDuplicate && ctx.isSubmitted);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isEmailDuplicate && ctx.isSubmitted);\n    }\n  },\n  dependencies: [i3.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.EmailValidator, i1.FormGroupDirective, i1.FormControlName],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Validators","User","i0","HomeComponent","constructor","formBuilder","userService","ref","createForm","isEmailDuplicate","isSubmitted","angForm","group","email","required","contactSource","contactReason","submitNewsletter","data","user","value","isEmailInDatabase","markForCheck","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Koós Zoltán\\source\\repos\\TEKenable_Newsletter\\ClientApp\\src\\app\\home\\home.component.ts","C:\\Users\\Koós Zoltán\\source\\repos\\TEKenable_Newsletter\\ClientApp\\src\\app\\home\\home.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { User } from '../shared/models/user';\r\nimport { UserService } from '../shared/services/user.service';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\nexport class HomeComponent {\r\n  title = 'app';\r\n  angForm!: FormGroup;\r\n  isEmailDuplicate!: boolean;\r\n  isSubmitted!: boolean;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private userService: UserService,\r\n    private ref: ChangeDetectorRef\r\n  ) {\r\n    this.createForm();\r\n    this.isEmailDuplicate = false;\r\n    this.isSubmitted = false;\r\n  }\r\n\r\n  createForm() {\r\n    this.angForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      contactSource: ['', Validators.required],\r\n      contactReason: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  submitNewsletter(data: { value: { email: string; contactSource: string; contactReason: string; }; }) {\r\n    var user = new User();\r\n    user.email = data.value.email;\r\n    user.contactSource = data.value.contactSource;\r\n    user.contactReason = data.value.contactReason;\r\n\r\n    this.isEmailDuplicate = this.userService.isEmailInDatabase(user.email);\r\n    if (!this.isEmailDuplicate) {\r\n      this.userService.submitNewsletter(user)\r\n    }\r\n    this.isSubmitted = true;\r\n    this.ref.markForCheck();\r\n  }\r\n}\r\n","<div>\r\n  <form [formGroup]=\"angForm\" novalidate (ngSubmit)=\"submitNewsletter(angForm)\">\r\n    <div class=\"form-group\">\r\n      <label>Email</label>\r\n      <input class=\"form-control\" formControlName=\"email\" type=\"email\" ngModel email>\r\n    </div>\r\n    <div *ngIf=\"angForm!.controls['email'].invalid && (angForm!.controls['email'].dirty || angForm!.controls['email'].touched)\" class=\"alert alert-danger\">\r\n      <div *ngIf=\"angForm!.controls['email'].errors.required\">\r\n        Email is required.\r\n      </div>\r\n      <div *ngIf=\"angForm!.controls['email'].errors.email\">\r\n        Email is not valid.\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>How they heard about us</label>\r\n      <select class=\"form-control\" formControlName=\"contactSource\" type=\"text\">\r\n        <option>Advert</option>\r\n        <option>Word of Mouth</option>\r\n        <option>Other</option>\r\n      </select>\r\n    </div>\r\n    <div *ngIf=\"angForm!.controls['contactSource'].invalid && (angForm!.controls['contactSource'].dirty || angForm!.controls['contactSource'].touched)\" class=\"alert alert-danger\">\r\n      <div *ngIf=\"angForm!.controls['contactSource'].errors.required\">\r\n        Contact source is required.\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Reason for signing up</label>\r\n      <input class=\"form-control\" formControlName=\"contactReason\" type=\"text\">\r\n    </div>\r\n    <div *ngIf=\"angForm!.controls['contactReason'].invalid && (angForm!.controls['contactReason'].dirty || angForm!.controls['contactReason'].touched)\" class=\"alert alert-danger\">\r\n      <div *ngIf=\"angForm!.controls['contactReason'].errors.required\">\r\n        Contact reason is required.\r\n      </div>\r\n    </div>\r\n    <button type=\"submit\"\r\n            [disabled]=\"angForm!.pristine || angForm!.invalid\" class=\"btn btn-success\">\r\n      Submit\r\n    </button>\r\n    <div *ngIf=\"isEmailDuplicate && isSubmitted\" class=\"alert alert-danger\">\r\n      Email is already in the database.\r\n    </div>\r\n    <div *ngIf=\"!isEmailDuplicate && isSubmitted\" class=\"alert alert-success\">\r\n      You signed up to the newsletter.\r\n    </div>\r\n  </form>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}